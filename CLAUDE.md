# CLAUDE.md

このファイルは、Claude Code (claude.ai/code) がdotrulesリポジトリのコードを扱う際のガイダンスを提供します。

## プロジェクト概要

**dotrules**は、dotfiles文化にインスパイアされたClaude Code開発のためのベストプラクティス・テンプレート集です。複数のプロジェクト・マシン間で一貫したAI駆動開発体験を実現することを目的としています。

## アーキテクチャ

- **best-practices/**: 汎用的な開発ベストプラクティス集
- **templates/**: 再利用可能な設定ファイルテンプレート
- **scripts/**: 自動化・セットアップスクリプト
- **examples/**: 具体的な使用例・ドキュメント

## 開発原則

### 1. **汎用性の追求**
- プロジェクト固有の内容は含めない
- 技術スタック横断で活用できるパターンを重視
- 具体例は examples/ に分離

### 2. **実用性の重視**
- 実際のプロジェクトで検証されたパターンのみ採用
- すぐに使える形でテンプレート化
- 自動化スクリプトで導入コストを最小化

### 3. **継続的改善**
- コミュニティフィードバックを積極的に取り入れ
- 新しい技術・パターンの定期的な評価
- バージョン管理による段階的な改善

## ファイル構造ガイドライン

### best-practices/
各ベストプラクティス文書は以下の構造に従う：

```markdown
# タイトル

## 概要
- 対象技術・フレームワーク
- 解決する課題
- 期待される効果

## 基本原則
- 重要な設計思想
- 判断基準

## 具体的なパターン
- コード例
- 設定例
- 良い例・悪い例の対比

## まとめ
- 実現される価値
- 関連する他のベストプラクティス
```

### templates/
テンプレートファイルは以下の要件を満たす：

- **汎用性**: 多くのプロジェクトで使用可能
- **カスタマイズ性**: プロジェクト固有の調整が容易
- **最新性**: 最新の技術動向を反映
- **コメント**: 設定の意図・理由を明記

### scripts/
スクリプトは以下の品質基準に従う：

- **安全性**: 既存ファイルの上書き前にバックアップ
- **冪等性**: 複数回実行しても安全
- **エラーハンドリング**: 適切なエラーメッセージと復旧手順
- **ユーザビリティ**: 対話的な確認・選択肢の提供

## コンテンツ更新ガイドライン

### ベストプラクティスの追加・更新

1. **実用性の検証**
   - 実際のプロジェクトでの使用実績
   - 複数の技術スタックでの適用可能性
   - パフォーマンス・品質への明確な効果

2. **文書品質の確保**
   - 具体的なコード例の提供
   - 判断基準・理由の明記
   - 他のベストプラクティスとの整合性

3. **バージョン管理**
   - 破壊的変更時のマイグレーションガイド
   - 後方互換性の考慮
   - CHANGELOG.mdの更新

### テンプレートの更新

1. **技術動向の反映**
   - 新しいフレームワーク・ツールへの対応
   - 非推奨機能・設定の除去
   - セキュリティベストプラクティスの適用

2. **使いやすさの改善**
   - デフォルト値の最適化
   - コメント・説明の充実
   - プロジェクト固有の調整箇所の明示

## 品質保証プロセス

### コードレビュー観点

1. **実用性**
   - 実際のプロジェクトで適用可能か
   - 導入コストに見合う効果があるか

2. **保守性**
   - 将来の技術変化に対応できるか
   - 他のパターンとの整合性が取れているか

3. **分かりやすさ**
   - 初心者でも理解・適用できるか
   - 判断基準が明確に示されているか

### テスト戦略

1. **スクリプトテスト**
   - 様々な環境での動作確認
   - エラーケースの処理確認
   - 既存ファイルとの競合テスト

2. **テンプレートテスト**
   - 新規プロジェクトでの適用テスト
   - 各種技術スタックでの動作確認
   - ビルド・実行の成功確認

## 貢献ガイドライン

### 新しいベストプラクティスの提案

1. **Issue作成**
   - 解決したい課題の明確化
   - 対象技術・適用範囲の説明
   - 期待される効果の具体化

2. **プルリクエスト**
   - 実際のプロジェクトでの検証結果
   - 具体的なコード例・設定例
   - 他のベストプラクティスとの関係性

### テンプレートの改善

1. **現状分析**
   - 現在のテンプレートの問題点
   - 改善による効果の見積もり
   - 後方互換性への影響

2. **段階的改善**
   - 小さな改善の積み重ね
   - ユーザーフィードバックの反映
   - 適切なバージョニング

## トラブルシューティング

### よくある問題

1. **スクリプト実行エラー**
   - 権限不足: `chmod +x scripts/*.sh`
   - パス不正: 絶対パスでの実行を試行
   - 依存関係不足: 必要なツールのインストール確認

2. **テンプレート適用エラー**
   - 既存ファイルとの競合: バックアップ作成後に手動マージ
   - 設定不備: プロジェクト固有の調整が必要
   - バージョン非互換: 対応バージョンの確認

3. **git submodule関連**
   - 初期化失敗: `git submodule update --init --recursive`
   - 更新失敗: `git submodule update --remote`
   - 削除方法: `git submodule deinit` → `git rm`

## 開発・リリースフロー

### 開発ブランチ戦略

- **main**: 安定版・本番利用可能
- **develop**: 開発版・次期リリース準備
- **feature/***: 新機能・改善の開発
- **hotfix/***: 緊急修正

### リリースプロセス

1. **機能開発** (feature/* → develop)
2. **統合テスト** (develop)
3. **リリース準備** (release/* → main)
4. **タグ付け** (v1.2.3)
5. **リリースノート** 作成

### バージョニング

Semantic Versioningに従う：
- **MAJOR**: 破壊的変更
- **MINOR**: 後方互換性のある機能追加
- **PATCH**: 後方互換性のあるバグ修正

## AI駆動開発への貢献

dotrulesは、AI駆動開発のベストプラクティスを蓄積・共有するプラットフォームとして機能します：

1. **知識の体系化**: 実践で得られた知見の構造化
2. **自動化の推進**: 反復作業の効率化
3. **品質の標準化**: 一貫した開発品質の実現
4. **学習の促進**: 新しい開発者の早期戦力化

---

**dotrulesで、一貫したAI駆動開発体験を実現しましょう！** 🚀